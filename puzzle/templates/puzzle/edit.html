{% extends 'base.html' %}
{% load static i18n jsonify %}

{% block head_js %}
    {{ block.super }}
{% endblock %}

{% block extra_css %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'maps/css/edit.css' %}">
{% endblock %}

{% block content %}
    {% if debug %}
    <script type="text/javascript" src="//maps.googleapis.com/maps/api/js?v=3.30&sensor=false&libraries=geometry&language=en"></script>
    {% else %}
    <script type="text/javascript" src="//maps.googleapis.com/maps/api/js?v=3.30&sensor=false&libraries=geometry&language=en&key={{ google_key }}"></script>
    {% endif %}

    <div class="container">
        <div id="tree" class="gmap-game-edit"></div>
    </div>
    <script>
      __MAP__ = {{ object.get_init_params|jsonify }};
      __LANGUAGE__ = '{{ language }}';
      __REGIONS__ = JSON.parse('{{ regions|jsonify }}');
      __CHECKED__ = JSON.parse('{{ checked|jsonify }}');
      __FIELDS__ = JSON.parse('{{ fields|jsonify }}');
    </script>
    <script type="text/javascript" src={% static "js/common.js" %}></script>
    <script type="text/javascript" src={% static "js/components.js" %}></script>
    <script type="text/javascript" src={% static "js/tree.js" %}></script>
{% endblock %}

{% block extra_js %}
  {{ block.super }}
{% endblock %}